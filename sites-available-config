server {
    listen 80;
    server_name courses.adicu.com;
    rewrite ^ https://adicu.com/labs permanent;
}

server {
    listen 80;
    server_name devfe.st;

    root /srv/2016.devfe.st/public_html;
    access_log /srv/2016.devfe.st/logs/access.log;
    error_log /srv/2016.devfe.st/logs/error.log;

    location / {
	index index.html;
    }
}

server {
    listen 80;
    server_name conduct.devfe.st;
    rewrite ^ http://devfe.st/static/DevFest2016CodeofConduct.pdf permanent;
}

server {
    listen 80;
    server_name learn.devfe.st;

    root /srv/2016.devfe.st/public_html/learn;
    access_log /srv/2016.devfe.st/logs/access.log;
    error_log /srv/devfe-st/logs/error.log;

    location / {
	index index.html;
    }
}

server {
    listen 80;
    server_name 2015.devfe.st;

    root /srv/devfe-st/www;
    access_log /srv/devfe-st/logs/access.log;
    error_log /srv/devfe-st/logs/error.log;

    location / {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_pass http://127.0.0.1:6001;
    }
}

server {
    listen 80;
    server_name *.devfe.st;
    return 301 http://devfe.st$request_uri;
}

server {
    listen 80;
    server_name labs.adicu.com;
    return 301 https://adicu.com/labs;
}

server {
    listen 80;
    server_name apply.to.labs.adicu.com;
    access_log /srv/labs-app-server/logs/access.log;
    error_log /srv/labs-app-server/logs/error.log;
    root /srv/labs-app-server/www;

    location / {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_pass http://127.0.0.1:6010;
    }
}

server {
    listen 80;

    server_name adicu.com;
    return 301 https://$host$request_uri;
}

server {
	listen 80;
        server_name *.adicu.com;
        rewrite ^ https://adicu.com$request_uri? permanent;
}

server {
    listen 443 ssl;
    server_name adicu.com;
    root /srv/adi-website/www;

    ssl_certificate /srv/adi-website/ssl/unified.crt;
    ssl_certificate_key /srv/adi-website/ssl/adicu.com.key;

    access_log /srv/adi-website/logs/access.log;
    error_log /srv/adi-website/logs/error.log;

    location / {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_pass http://127.0.0.1:8181;
    }
}

server {
    listen 80;
    server_name density.adicu.com;

    root /srv/density/www;
    access_log /srv/density/logs/access.log;
    error_log /srv/density/logs/error.log;

    location / {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_pass http://127.0.0.1:6002;
    }
}

server {
	listen 80;

	server_name learn.adicu.com;

	access_log /srv/learn/logs/access.log;
	error_log /srv/learn/logs/error.log;

	root /srv/learn/public_html/;

	location ~* ^/(.+)$ {
		index index.html;
	}
	location ~* ^/$ {
		return 301 https://adicu.com/resources;
	}
}

server {
    listen 443;
    server_name learn.adicu.com;

    rewrite ^ http://learn.adicu.com/$request_uri permanent;
}


server {
	listen 80;

	server_name docs.adicu.com;

	access_log /srv/docs/logs/access.log;
	error_log /srv/docs/logs/error.log;

	root /srv/docs/public_html/;

	location / {
		index index.html;
	}
}

server {
	listen 80;
	server_name wiki.adicu.com;
	rewrite ^ http://github.com/adicu/secrets/wiki$request_uri? permanent;
}


server {
    listen 80;

    server_name newsletter.adicu.com;
    return 301 https://docs.google.com/a/adicu.com/forms/d/1rP0epIrBmFwIxrzSN0eqq_-pznytpdBa_qc5k1aUx4c/viewform;
}

#########
# Slack #
#########

server {
    listen 80;
    server_name slack.adicu.com;

    root /srv/slack.adicu.com/public_html/;
    access_log /srv/slack.adicu.com/logs/access.log;
    error_log /srv/slack.adicu.com/logs/error.log;

    location / {
	index index.html;
    }
}

server {
	listen 80;
	server_name columbia-cs.slack.adicu.com;
        access_log /srv/columbia-cs.slack.adicu.com/logs/access.log;
        error_log /srv/columbia-cs.slack.adicu.com/logs/error.log;

        location / {
        	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        	proxy_set_header Host $http_host;
        	proxy_redirect off;
        	proxy_pass http://127.0.0.1:3000;
    	}
}


server {
	listen 80;
	server_name adi-general-body.slack.adicu.com;
        access_log /srv/adi-general-body.slack.adicu.com/logs/access.log;
        error_log /srv/adi-general-body.slack.adicu.com/logs/error.log;

        location / {
        	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        	proxy_set_header Host $http_host;
        	proxy_redirect off;
        	proxy_pass http://127.0.0.1:3001;
    	}
}

#server {
#       listen 80;
#
#       server_name mario.adicu.com;

#       access_log /srv/mario/access.log;
#       error_log /srv/mario/error.log;
#
#       location / {
#       	# NOTE: to swith from live to landing page or vice versa, comment out the
#       	# configuration you would not like. Make sure to run `nginx -t` to make sure
#       	# the config is still good before going live.

#       	# LIVE
#       	# proxy_set_header X-Forward-For $proxy_add_x_forwarded_for;
#       	# proxy_set_header Host $http_host;
#       	# proxy_redirect off;
#       	# proxy_pass http://160.39.133.151:5000/;

#       	# LANDING PAGE
#       	root /mario/landing_page;
#       }
#}
